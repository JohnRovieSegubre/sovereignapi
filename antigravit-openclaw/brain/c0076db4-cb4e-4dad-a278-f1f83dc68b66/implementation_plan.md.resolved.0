# Implementation Plan - Fix Hardcoded Paths & 24/7 System Setup

The goal is to fix hardcoded file paths in the codebase that point to the old `obsidian-trifid` directory, ensuring the system runs correctly in the new `agent` directory. This will enable the "24/7 system" (Gateway + Monitor) to function.

## User Review Required

> [!IMPORTANT]
> I will be changing absolute paths (e.g., `c:\Users\...\obsidian-trifid`) to relative paths (e.g., `Path(__file__).parent`). This makes the codebase portable.

## Proposed Changes

### Configuration & Scripts

#### [MODIFY] [gateway_server.py](file:///c:/Users/rovie%20segubre/agent/gateway_server.py)
- Update `SECURE_DIR` to verify `Path(__file__).parent / ".agent" / "secure"`.

#### [MODIFY] [watchdog.py](file:///c:/Users/rovie%20segubre/agent/scripts/watchdog.py)
- Update `WORKSPACE_DIR` to use `Path(__file__).parent.parent`.

#### [MODIFY] [antigravity_monitor.py](file:///c:/Users/rovie%20segubre/agent/scripts/antigravity_monitor.py)
- Update `WORKSPACE_DIR` to use `Path(__file__).parent.parent`.

#### [MODIFY] [START_MONITOR.bat](file:///c:/Users/rovie%20segubre/agent/START_MONITOR.bat)
- Update the python command to use `%~dp0` (current batch file directory) to locate [scripts\watchdog.py](file:///c:/Users/rovie%20segubre/agent/scripts/watchdog.py).

#### [MODIFY] Utility Scripts
- Update `creds_path` or `TOKEN_PATH` in the following files to use relative paths:
    - [scripts/verify_alby.py](file:///c:/Users/rovie%20segubre/agent/scripts/verify_alby.py)
    - [scripts/test_invoice_generation.py](file:///c:/Users/rovie%20segubre/agent/scripts/test_invoice_generation.py)
    - [post_and_verify_moltbook.py](file:///c:/Users/rovie%20segubre/agent/post_and_verify_moltbook.py)
    - [moltbook_explore.py](file:///c:/Users/rovie%20segubre/agent/moltbook_explore.py)
    - [list_moltbook_submolts.py](file:///c:/Users/rovie%20segubre/agent/list_moltbook_submolts.py)
    - [debug_moltbook_raw.py](file:///c:/Users/rovie%20segubre/agent/debug_moltbook_raw.py)
    - [create_submolt.py](file:///c:/Users/rovie%20segubre/agent/create_submolt.py)
    - [check_moltbook_status.py](file:///c:/Users/rovie%20segubre/agent/check_moltbook_status.py)
    - [post_moltbook.py](file:///c:/Users/rovie%20segubre/agent/post_moltbook.py)

## Verification Plan

### Automated Tests
- I will run `python scripts/watchdog.py` for a few seconds to verify it starts without path errors (then kill it).
- I will run `python gateway_server.py` (dry run check) to ensure it finds the secrets directory (even if secrets are missing, it should look in the right place).

### Manual Verification
- The user can run [START_MONITOR.bat](file:///c:/Users/rovie%20segubre/agent/START_MONITOR.bat) to start the 24/7 system.
